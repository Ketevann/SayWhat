!(function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("moize",[],n):"object"==typeof exports?exports.moize=n():t.moize=n()})(this,(function(){return (function(t){function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var e={};return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=4)})([function(t,n,e){"use strict";e.d(n,"b",(function(){return r})),e.d(n,"a",(function(){return i})),e.d(n,"c",(function(){return o})),e.d(n,"l",(function(){return u})),e.d(n,"f",(function(){return s})),e.d(n,"i",(function(){return a})),e.d(n,"h",(function(){return c})),e.d(n,"g",(function(){return f})),e.d(n,"j",(function(){return l})),e.d(n,"k",(function(){return h})),e.d(n,"e",(function(){return d})),e.d(n,"d",(function(){return p}));var r=Number.POSITIVE_INFINITY,i="You must pass either a function or an object of options as the first parameter to moize.",o='You have not specified a promiseLibrary, and it appears that your browser does not support native promises. You can either assign the library you are using to the global Promise object, or pass the library in options via the "promiseLibrary" property.',u={done:!0},s="function"==typeof Symbol?Symbol("isMoizeCache"):"__IS_MOIZE_CACHE__",a="[object Array]",c="function",f=/^\s*function\s+([^\(\s]*)\s*/,l="object",h=[Boolean,Date,Number,RegExp,String],d=["contextTypes","defaultProps","propTypes"],p=d.length},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var i=e(0),o=e(2),u=(function(){function t(){r(this,t),this[i.f]=!0,this.lastItem=void 0,this.list=[],this.size=0}return t.prototype.clear=function(){this.list.length=0,this.setLastItem()},t.prototype.delete=function(t){var n=e.i(o.h)(this,t);~n&&(e.i(o.i)(this.list,n),this.setLastItem(this.list[0]))},t.prototype.get=function(t){if(this.lastItem){if(t===this.lastItem.key)return this.lastItem.value;var n=e.i(o.h)(this,t);if(~n){var r=this.list[n];return this.setLastItem(e.i(o.j)(e.i(o.i)(this.list,n),r)),r.value}}},t.prototype.getKeyIterator=function(){var t=this,n=-1;return{next:function(){return++n>=t.size?i.l:{index:n,isMultiParamKey:t.list[n].isMultiParamKey,key:t.list[n].key}}}},t.prototype.has=function(t){return 0!==this.size&&(t===this.lastItem.key||!!~e.i(o.h)(this,t))},t.prototype.set=function(t,n){this.setLastItem(e.i(o.j)(this.list,{key:t,isMultiParamKey:!(!t||!t.isMultiParamKey),value:n}))},t.prototype.setLastItem=function(t){this.lastItem=t,this.size=this.list.length},t.prototype.updateItem=function(t,n){var r=e.i(o.h)(this,t);~r&&(this.list[r].value=n,this.lastItem&&t===this.lastItem.key&&(this.lastItem.value=n))},t})();n.a=u},function(t,n,e){"use strict";e.d(n,"f",(function(){return f})),e.d(n,"i",(function(){return h})),e.d(n,"j",(function(){return d})),e.d(n,"g",(function(){return y})),e.d(n,"b",(function(){return z})),e.d(n,"a",(function(){return j})),e.d(n,"c",(function(){return w})),e.d(n,"h",(function(){return K})),e.d(n,"d",(function(){return F})),e.d(n,"e",(function(){return R}));var r=e(1),i=e(0),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=JSON.stringify,s=Object.keys,a=Object.prototype.toString,c=function(t,n){for(var e=i.d,r=void 0;e--;)r=i.e[e],t[r]&&(n[r]=t[r]);return n},f=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return n.reduce((function(t,n){return function(){return t(n.apply(void 0,arguments))}}))},l=function(t,n){if(!t.length)return!0;for(var e=t.length;e--;)if(!n(t[e],e))return!1;return!0},h=function(t,n){if(!t.length)return t;for(var e=n-1;++e<t.length;)t[e]=t[e+1];return t.length-=1,t},d=function(t,n){for(var e=t.length;e--;)t[e+1]=t[e];return t[0]=n},p=function(t){return!!t[i.f]},y=function(t,n){return function(e){var r;return t((r={},r[n]=e,r))}},m=function(t,n){return p(t)?function(){return t.list.map((function(t){return t[n]}))}:function(){}},v=function(t){var n=t.toString().match(i.g);return n?n[1]:""},g=function(t){return t.displayName||t.name||v(t)||i.h},b=function(t){return a.call(t)===i.i},I=Array.isArray||b,x=function(t){return!!t&&(void 0===t?"undefined":o(t))===i.j},z=function(t){return(void 0===t?"undefined":o(t))===i.h},j=function(t){return x(t)&&t.constructor===Object},S=function(t){return x(t)&&l(i.k,(function(n){return!(t instanceof n)}))},k=function(t,n){return z(n)?""+n:n},P=function(t){var n=new r.a;return (function t(e,r){return S(e)?n.has(e)?{$ref:n.get(e)}:(n.set(e,r),I(e)?e.map((function(n,e){return t(n,r+"["+e+"]")})):s(e).reduce((function(n,i){return n[i]=t(e[i],r+"["+JSON.stringify(i)+"]"),n}),{})):e})(t,"$")},A=function(t,n){arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&p(t)&&(n=t.list[t.list.length-1].key),t.has(n)&&t.delete(n)},M=function(t,n){return t.isMultiParamKey&&t.key.length===n.length&&l(n,(function(n,e){return n===t.key[e]}))},O=function(t,n){if(t.lastItem&&M(t.lastItem,n))return t.lastItem.key;for(var e=t.getKeyIterator(),r=void 0;(r=e.next())&&!r.done;)if(M(r,n))return r.key;return n.isMultiParamKey=!0,n},w=function(t,n,e){return function(r){return r.cache=t,r.displayName="Memoized("+g(n)+")",r.isMemoized=!0,r.options=e,r.originalFunction=n,r.add=function(n,e){t.has(n)||O(t,n)!==n||t.set(n,e)},r.clear=function(){t.clear()},r.delete=function(){for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];var i=1===e.length&&e[0].isMultiParamKey?e[0]:O(t,e);A(t,i)},r.keys=m(t,"key"),r.values=m(t,"value"),c(n,r)}},_=function(t){return t===~~t&&t>0},K=function(t,n){for(var e=t.getKeyIterator(),r=void 0;(r=e.next())&&!r.done;)if(r.key===n)return r.index;return-1},L=function(t,n){try{return u(t,n)}catch(e){return u(P(t),n)}},N=function(t,n){return x(t)?L(t,n):t},E=function(t,n){var e=t?k:null,r=_(n);return function(t){for(var i=r?n:t.length,o=-1,u="|";++o<i;)u+=N(t[o],e)+"|";return u}},T=function(t,n,e){return z(t)?t:E(n,e)},F=function(t,n,e,r,i){if(n){var o=T(e,r,i);return function(t){return o(t)}}return _(i)?function(n){return n.length>1?O(t,n.slice(0,i)):n[0]}:function(n){return n.length>1?O(t,n):n[0]}},C=function(t){return function(n,e){setTimeout((function(){A(n,e)}),t)}},Y=function(t,n,e){return function(r){return t.delete(n),e.reject(r)}},J=function(t,n,e,r,i){return function(o){return t.updateItem(n,i.resolve(o)),e&&r(t,n),o}},R=function(t,n,e,r,i){var o=_(e),u=_(r),s=C(e);return n?function(n,e){var a=J(t,n,o,s,i),c=Y(t,n,i),f=e.then(a,c);return t.set(n,f),u&&t.size>r&&A(t,void 0,!0),f}:function(n,e){return t.set(n,e),o&&s(t,n),u&&t.size>r&&A(t,void 0,!0),e}}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e(1),i=e(0),o=e(2),u=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},s={isPromise:!0},a={maxArgs:2,serialize:!0,serializeFunctions:!0},c={serialize:!0},f=function t(n){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.i(o.a)(n))return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(e,u({},n,r))};if(!e.i(o.b)(n))throw new TypeError(i.a);var a=n.isMemoized,c=a?n.originalFunction:n,f=a?u({},n.options,s):s,l=f.cache,h=void 0===l?new r.a:l,d=f.isPromise,p=void 0!==d&&d,y=f.maxAge,m=void 0===y?i.b:y,v=f.maxArgs,g=void 0===v?i.b:v,b=f.maxSize,I=void 0===b?i.b:b,x=f.promiseLibrary,z=void 0===x?Promise:x,j=f.serialize,S=void 0!==j&&j,k=f.serializeFunctions,P=void 0!==k&&k,A=f.serializer;if(p&&!z)throw new ReferenceError(i.c);var M=e.i(o.c)(h,c,f),O=e.i(o.d)(h,S,A,P,g),w=e.i(o.e)(h,p,m,I,z),_=void 0;return M((function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return _=O(n),h.has(_)?h.get(_):w(_,c.apply(this,n))}))};f.compose=o.f,f.maxAge=e.i(o.g)(f,"maxAge"),f.maxArgs=e.i(o.g)(f,"maxArgs"),f.maxSize=e.i(o.g)(f,"maxSize"),f.promise=f(s),f.react=f(a),f.serialize=f(c),f.simple=f.maxSize(1),n.default=f},function(t,n,e){t.exports=e(3)}])}));