'use strict';

exports.__esModule = true;
exports.hashKeys = exports.hash = undefined;

var _reduce = require('lodash/fp/reduce');

var _reduce2 = _interopRequireDefault(_reduce);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var counter = 0;

/**
 * @function hash
 *
 * @description
 * simple bitwise hash of string value
 *
 * @param {string} key ASCII only
 * @return {number} 32-bit positive integer hash
 */
// external dependencies
var hash = exports.hash = function hash(key) {
  var stringToHash = key + '-' + counter;

  var hashValue = 5381,
      index = stringToHash.length;

  while (index) {
    hashValue = hashValue * 33 ^ stringToHash.charCodeAt(--index);
  }

  return 'scoped__' + key + '__' + (hashValue >>> 0);
};

/**
 * @function hashKeys
 *
 * @description
 * return map with hashed keys associated to their original values
 *
 * @param {array<string>} keys
 * @returns {object}
 */
var hashKeys = exports.hashKeys = (0, _reduce2.default)(function (hashMap, key) {
  hashMap[key] = hash(key);

  return hashMap;
}, {});